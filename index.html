<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Valentine</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root {
  --bg1: #ffd6e7;
  --bg2: #ffeef6;
  --card: #ffffffcc;
  --yes: #ff3b7a;
  --yesHover: #ff1f68;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100svh;
  display: grid;
  place-items: center;
  background: radial-gradient(circle at top, var(--bg2), var(--bg1));
  font-family: system-ui, sans-serif;
  overflow: hidden;
  padding: 16px;
}

#confettiCanvas {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 9999;
}

.card {
  width: min(720px, 92vw);
  padding: 26px 22px;
  background: var(--card);
  backdrop-filter: blur(10px);
  border-radius: 22px;
  text-align: center;
  box-shadow: 0 18px 60px rgba(0,0,0,.15);
}

.button-zone {
  position: relative;
  width: min(520px, 92%);
  height: 150px;
  margin: 0 auto;
  touch-action: none;
}

button {
  padding: 16px 24px;
  font-size: 18px;
  font-weight: 800;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,.14);
}

#yesBtn {
  position: absolute;
  left: 18%;
  top: 50%;
  transform: translateY(-50%);
  background: var(--yes);
  color: white;
}

#noBtn {
  position: absolute;
  left: 62%;
  top: 50%;
  transform: translateY(-50%);
  background: #e5e7eb;
}

.result { display:none; margin-top:20px; }

.hint { margin-top:10px; font-size:13px; opacity:.7; }

.fireworks { width:min(380px,90vw); }

</style>
</head>

<body>

<canvas id="confettiCanvas"></canvas>

<!-- Anniversary Page -->
<section class="card" id="anniversaryPage">

<img
src="https://media.giphy.com/media/l4FGuhL4U2WyjdkaY/giphy.gif"
style="width:min(280px,80vw); border-radius:18px;"
/>

<h1>Happy 3 Month Anniversary ‚ù§Ô∏è</h1>

<p style="font-size:18px; line-height:1.5;">
Looks like what we have is real‚Ä¶ and honestly, I‚Äôm really grateful for it.
</p>

<p style="margin-top:18px; font-size:20px;">
Just one more thing üòâ
</p>

<button id="nextBtn">Next ‚Üí</button>

</section>

<!-- Valentine Page -->
<main class="card" id="valentinePage" style="display:none;">

<h1>Nirali will you be my valentine?</h1>

<section class="button-zone" id="zone">
<button id="yesBtn">Yes</button>
<button id="noBtn">No</button>
</section>

<div class="hint" id="hint">‚ÄúNo‚Äù seems a bit shy üòà</div>

<section class="result" id="result">
<h2>YAY! üéâ</h2>
<img
class="fireworks"
src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif"
/>
</section>

</main>

<script>
/* ---------- PAGE NAVIGATION ---------- */

const anniversaryPage = document.getElementById("anniversaryPage");
const valentinePage = document.getElementById("valentinePage");
const nextBtn = document.getElementById("nextBtn");

nextBtn.addEventListener("click", () => {
  anniversaryPage.style.display = "none";
  valentinePage.style.display = "block";
});

/* ---------- CONFETTI ---------- */

const confettiCanvas = document.getElementById("confettiCanvas");

function resizeConfettiCanvas() {
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  confettiCanvas.width = window.innerWidth * dpr;
  confettiCanvas.height = window.innerHeight * dpr;
}

resizeConfettiCanvas();
window.addEventListener("resize", resizeConfettiCanvas);

const confettiInstance = confetti.create(confettiCanvas, {
  resize:false,
  useWorker:true
});

function fullScreenConfetti() {
  const end = Date.now() + 1600;

  (function frame() {
    confettiInstance({
      particleCount:12,
      spread:90,
      startVelocity:45,
      origin:{ x:Math.random(), y:Math.random()*0.3 }
    });

    if(Date.now() < end) requestAnimationFrame(frame);
  })();

  setTimeout(()=>{
    confettiInstance({
      particleCount:300,
      spread:140,
      startVelocity:60,
      origin:{ x:0.5, y:0.55 }
    });
  },300);
}

/* ---------- VALENTINE BUTTON LOGIC ---------- */

const zone = document.getElementById("zone");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const result = document.getElementById("result");
const hint = document.getElementById("hint");

let yesScale = 1;

function growYes() {
  yesScale = Math.min(2.2, yesScale + 0.1);
  yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
}

function clamp(n,min,max){
  return Math.max(min, Math.min(max,n));
}

function moveNo(px,py){
  const z = zone.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();

  let dx = (b.left + b.width/2) - px;
  let dy = (b.top + b.height/2) - py;
  let mag = Math.hypot(dx,dy) || 1;

  dx /= mag;
  dy /= mag;

  let newLeft = (b.left - z.left) + dx*150;
  let newTop  = (b.top - z.top) + dy*150;

  newLeft = clamp(newLeft,0,z.width - b.width);
  newTop  = clamp(newTop,0,z.height - b.height);

  noBtn.style.left = newLeft + "px";
  noBtn.style.top = newTop + "px";
  noBtn.style.transform = "none";

  growYes();
}

/* Desktop hover */
zone.addEventListener("pointermove", e => {
  const b = noBtn.getBoundingClientRect();

  const d = Math.hypot(
    (b.left + b.width/2) - e.clientX,
    (b.top + b.height/2) - e.clientY
  );

  if(d < 140) moveNo(e.clientX, e.clientY);
});

/* Mobile tap */
function randomMove(){
  const zoneRect = zone.getBoundingClientRect();

  const randomX = zoneRect.left + Math.random() * zoneRect.width;
  const randomY = zoneRect.top + Math.random() * zoneRect.height;

  moveNo(randomX, randomY);
}

noBtn.addEventListener("click", e => {
  e.preventDefault();
  randomMove();
});

noBtn.addEventListener("touchstart", e => {
  e.preventDefault();
  randomMove();
},{ passive:false });

/* YES CLICK */

yesBtn.addEventListener("click", () => {
  zone.style.display = "none";
  hint.style.display = "none";
  result.style.display = "block";
  fullScreenConfetti();
});

</script>

</body>
</html>
