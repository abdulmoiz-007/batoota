<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Valentine</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>

:root{
 --bg1:#ffd6e7;
 --bg2:#ffeef6;
 --card:#ffffffcc;
 --yes:#ff3b7a;
}

*{box-sizing:border-box;}

body{
 margin:0;
 min-height:100vh;
 display:grid;
 place-items:center;
 background:radial-gradient(circle at top,var(--bg2),var(--bg1));
 font-family:system-ui,sans-serif;
 overflow:hidden;
 padding:16px;
}

/* Floating hearts */
body::before{
 content:"ğŸ’— ğŸ’– ğŸ’• ğŸ’˜ ğŸ’";
 position:fixed;
 inset:0;
 opacity:.12;
 font-size:40px;
 animation:float 12s linear infinite;
 pointer-events:none;
}

@keyframes float{
 from{transform:translateY(100vh);}
 to{transform:translateY(-120vh);}
}

.card{
 width:min(720px,92vw);
 padding:26px 22px;
 background:var(--card);
 backdrop-filter:blur(10px);
 border-radius:22px;
 text-align:center;
 box-shadow:0 18px 60px rgba(0,0,0,.15);
 margin:auto;
}

.art{
 width:min(260px,80vw);
 display:block;
 margin-left:auto;
 margin-right:auto;
 margin-bottom:12px;
}

.fireworks{
 width:min(380px,90vw);
 display:block;
 margin-left:auto;
 margin-right:auto;
 margin-top:20px;
}

.heartbeat{
 animation:heartbeat 1.2s infinite;
 transform-origin:center;
}

@keyframes heartbeat{
 0%,100%{transform:scale(1);}
 50%{transform:scale(1.12);}
}

.button-zone{
 position:relative;
 width:min(520px,92%);
 height:150px;
 margin:auto;
}

button{
 padding:16px 24px;
 font-size:18px;
 font-weight:800;
 border-radius:999px;
 border:none;
 cursor:pointer;
 box-shadow:0 10px 24px rgba(0,0,0,.14);
 transition:left .25s ease, top .25s ease, transform .15s ease;
}

#yesBtn{
 position:absolute;
 left:18%;
 top:50%;
 transform:translateY(-50%);
 background:var(--yes);
 color:white;
}

#noBtn{
 position:absolute;
 left:62%;
 top:50%;
 transform:translateY(-50%);
 background:#e5e7eb;
}

.result{display:none;}

.hint{
 margin-top:10px;
 font-size:14px;
 opacity:.8;
}

</style>
</head>

<body>

<canvas id="confettiCanvas"></canvas>

<!-- MUSIC -->
<audio id="bgMusic" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6f1cc0e94b.mp3" type="audio/mp3">
</audio>

<!-- Anniversary -->
<section class="card" id="anniversaryPage">

<img src="https://media.giphy.com/media/l4FGuhL4U2WyjdkaY/giphy.gif"
style="width:min(280px,80vw); border-radius:18px;"/>

<h1>Happy 3 Month Anniversary â¤ï¸</h1>

<p>Looks like what we have is realâ€¦ and honestly, Iâ€™m really grateful for it.</p>

<p style="margin-top:18px; font-size:20px;">
Just one more thing ğŸ˜‰
</p>

<button id="nextBtn">Next â†’</button>

</section>

<!-- Valentine -->
<main class="card" id="valentinePage" style="display:none;">

<svg class="art" viewBox="0 0 320 240">
<defs>
<linearGradient id="fur"><stop offset="0" stop-color="#f7c7a1"/><stop offset="1" stop-color="#f2a97b"/></linearGradient>
<linearGradient id="heart"><stop offset="0" stop-color="#ff4d7d"/><stop offset="1" stop-color="#ff1f68"/></linearGradient>
</defs>

<path class="heartbeat"
d="M250 50 C250 33 270 25 282 38 C294 25 314 33 314 50 C314 78 282 92 282 106 C282 92 250 78 250 50Z"
fill="url(#heart)"/>

<path d="M90 120 C90 70 140 40 190 60 C240 40 290 70 290 120 C290 180 240 210 190 210 C140 210 90 180 90 120Z"
fill="url(#fur)"/>

<circle cx="160" cy="130" r="8"/>
<circle cx="220" cy="130" r="8"/>

</svg>

<h1>Rawan El Moghrabi will you be my valentine?</h1>

<section class="button-zone" id="zone">
<button id="yesBtn">Yes</button>
<button id="noBtn">No</button>
</section>

<div class="hint" id="hint">â€œNoâ€ exists only as a formality... </div>

<section class="result" id="result">
<h2>YAY! ğŸ‰</h2>
<img class="fireworks"
src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif"/>
</section>

</main>

<script>

/* Navigation + music */
const music = document.getElementById("bgMusic");
document.getElementById("nextBtn").onclick = ()=>{
 document.getElementById("anniversaryPage").style.display="none";
 document.getElementById("valentinePage").style.display="block";

 music.volume=0;
 music.play();

 let fade=setInterval(()=>{
   if(music.volume<0.35) music.volume+=0.02;
   else clearInterval(fade);
 },120);
};

/* Confetti */
const confettiCanvas=document.getElementById("confettiCanvas");
confettiCanvas.width=innerWidth;
confettiCanvas.height=innerHeight;

const confettiInstance=confetti.create(confettiCanvas,{resize:true,useWorker:true});

function fullConfetti(){
 confettiInstance({particleCount:250,spread:140,startVelocity:60});
}

/* Buttons */
const zone=document.getElementById("zone");
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const result=document.getElementById("result");
const hint=document.getElementById("hint");

let yesScale=1;
let noClicks=0;

const teasing=[
"Are you sure? ğŸ˜¢",
"Really sure?? ğŸ¥º",
"Iâ€™ll be very sad... ğŸ˜­",
"Okay butâ€¦ last chance ğŸ˜³"
];

function growYes(){
 yesScale=Math.min(2.2,yesScale+.1);
 yesBtn.style.transform=`translateY(-50%) scale(${yesScale})`;
}

function clamp(n,min,max){return Math.max(min,Math.min(max,n));}

function moveNo(px,py){
 const z=zone.getBoundingClientRect();
 const b=noBtn.getBoundingClientRect();

 let dx=(b.left+b.width/2)-px;
 let dy=(b.top+b.height/2)-py;
 let mag=Math.hypot(dx,dy)||1;

 dx/=mag; dy/=mag;

 let newLeft=(b.left-z.left)+dx*140;
 let newTop=(b.top-z.top)+dy*140;

 newLeft=clamp(newLeft,10,z.width-b.width-10);
 newTop=clamp(newTop,10,z.height-b.height-10);

 noBtn.style.left=newLeft+"px";
 noBtn.style.top=newTop+"px";
 noBtn.style.transform="translateY(0)";

 growYes();

 if(noClicks<teasing.length){
   hint.textContent=teasing[noClicks];
 }
 noClicks++;
}

function randomMove(){
 const rect=zone.getBoundingClientRect();
 const margin=40;

 const x=rect.left+margin+Math.random()*(rect.width-margin*2);
 const y=rect.top+margin+Math.random()*(rect.height-margin*2);

 moveNo(x,y);
}

zone.addEventListener("pointermove",e=>{
 const b=noBtn.getBoundingClientRect();
 const d=Math.hypot((b.left+b.width/2)-e.clientX,(b.top+b.height/2)-e.clientY);
 if(d<140) moveNo(e.clientX,e.clientY);
});

noBtn.onclick=e=>{e.preventDefault();randomMove();};
noBtn.ontouchstart=e=>{e.preventDefault();randomMove();};

yesBtn.onclick=()=>{
 zone.style.display="none";
 hint.style.display="none";
 result.style.display="block";
 fullConfetti();
};

</script>

</body>
</html>
